<div class="order-container">
  <div class="order-header">
    <h2>Order</h2>
  </div>

  <%= form_with url: orders_path, method: :post, local: true do %>
    <div class="order-form">
      <!-- === KIRI: CUSTOMER === -->
      <div class="order-section">
        <h2>Add Customer</h2>

        <div class="form-group-inline">
          <label>Name :</label>
          <%= text_field_tag :customer_name, nil, placeholder: "Nama Customer" %>
        </div>

        <div class="form-group-inline">
          <label>Phone :</label>
          <%= text_field_tag :customer_phone, nil, placeholder: "No. Telepon" %>
        </div>

        <div class="form-group-inline">
          <label>Email :</label>
          <%= text_field_tag :customer_email, nil, placeholder: "Email" %>
        </div>

        <div class="form-group-inline">
          <label>Address :</label>
          <%= text_area_tag :customer_address, nil, placeholder: "Alamat", rows: 2 %>
        </div>
      </div>

      <!-- === KANAN: SHOE === -->
      <div class="order-section">
        <h2>Add Shoe</h2>

        <div class="form-group-inline">
          <label>Shoes :</label>
          <%= text_field_tag :shoe_brand, nil, placeholder: "Merek Sepatu" %>
        </div>

        <div class="form-group-inline">
          <label>Color :</label>
          <%= text_field_tag :shoe_color, nil, placeholder: "Warna Sepatu" %>
        </div>

        <div class="form-group-inline">
          <label>Size :</label>
          <%= text_field_tag :shoe_size, nil, placeholder: "Ukuran Sepatu" %>
        </div>

        <div class="form-group-inline">
          <label>Material :</label>
          <%= text_field_tag :shoe_material, nil, placeholder: "Material" %>
        </div>

        <div class="form-group-inline">
          <label>Condition :</label>
          <%= text_field_tag :shoe_condition, nil, placeholder: "Kondisi Sepatu" %>
        </div>

        <div class="form-group-inline">
          <label>Service :</label>
          <%= select_tag :service_id, options_from_collection_for_select(Service.all, :id, :name, prompt: "Pilih Service"), id: "service_select" %>
        </div>
      </div>
    </div>

    <p id="harga-service" class="service-price">Pilih service untuk melihat harga</p>

    <div class="submit-container">
      <%= submit_tag "Submit Order", class: "order-submit" %>
    </div>
  <% end %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const serviceSelect = document.querySelector("#service_select");
    const hargaText = document.querySelector("#harga-service");

    const servicePrices = {
      <% Service.all.each do |service| %>
        <%= service.id %>: <%= service.price %>,
      <% end %>
    };

    serviceSelect.addEventListener("change", (e) => {
      const selectedId = e.target.value;
      if (servicePrices[selectedId]) {
        hargaText.textContent = "Harga: Rp " + servicePrices[selectedId].toLocaleString();
      } else {
        hargaText.textContent = "Pilih service untuk melihat harga";
      }
    });
  });
</script>
